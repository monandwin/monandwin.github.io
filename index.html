<!DOCTYPE html>
<style>
</style>
<html lang="en">
<head>
    <title> My Page</title>
    <meta charset="utf-8">
    <meta http-equiv="refresh" content="1000" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- babel help browser read jsx -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script> 
    <!-- React-->
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    
</head>
<body data-gr-c-s-loaded="true" >
    <div id="app"></div>
    
    <script type="text/babel">
        class Navbar extends React.Component{
            handleClick=()=>{

            }
            render(){
                return(
                <div id="Navbar">
                    <a id="logo" href="index.html" className="nav-link active"> 
                        <strong>MoN </strong>
                    </a>
                    <div id="Audio">
                        <audio controls autoPlay loop id="myMp3" >
                            <source src="assets/nhac.mp3" type="audio/mpeg"></source>
                        </audio>
                    </div>
                    <button onClick={()=>{this.props.handleClickFunc();}} id="nav_button" className="btn btn-light"> 
                        START
                    </button>
                </div>
                );
            }
        }
        class Heart extends React.Component{
           
            constructor(props){
                super(props);
                this.orgX=Math.floor(Math.random() * 80)+10;  
                this.orgY=Math.floor(Math.random() * 80)+10;
                this.orgRot=Math.floor(Math.random() * 360);
                this.dirX=Math.floor(Math.random()*5)-2;
                this.dirY=Math.floor(Math.random()*5)-2;
                this.dirRot=Math.floor(Math.random()*2);
                if (this.dirX*this.dirY==0) this.dirX=1;
                this.dirRot=(this.dirRot==1)?1:-1;
            }
            move(){
                document.getElementById(this.props.heartID).style.top=this.orgX.toString()+'%';
                document.getElementById(this.props.heartID).style.left=this.orgY.toString()+'%';
                document.getElementById(this.props.heartID).style.transform="rotate("+this.orgRot.toString()+"deg)";
                this.orgX+=this.dirX;  
                this.orgY+=this.dirY;
                this.orgRot+=this.dirRot*this.props.spRate;
                if (this.orgX>90) this.dirX*=-1;
                if (this.orgY>90) this.dirY*=-1;
                if (this.orgX<10) this.dirX*=-1;
                if (this.orgY<10) this.dirY*=-1;
                this.orgRot%=360;
            }
            componentDidMount(){
                this.interval = setInterval(()=>this.move(),40);
            }
            render(){
                return(
                    <div>
                        <img onClick={()=>{this.props.handleClickFunc(this.props.heartID);}} id={this.props.heartID} src="assets/Heart.png" height="10%" width="10%"></img>
                    </div>
                )
            }
        }

        class Image extends React.Component{
            whatToSay=[
                "I love you so much",
                "You are my angel, my princess",
                "I want you to be mine",
                "Love you forever",
                "Don't be so sad, since I love you so",
                "I will be yours",
                "Happy Penguin birthday",
                "Want to kiss you so much <3 <3 <3",
                "I will show you how perfect I can be",
                "Love you more than I can say",
                "I'm sorry a lot",
                "Will be by your side",
                "I don't know what to say, just love you so much",
                "I'm really hungry when doing this",
                "Change picture please :<<",
                "This is my cute princess >....<"
            ]
            handleClick=()=>{
                document.getElementById("Image").style.display="none";
            }
            render(){
                const imagelink="assets/"+this.props.imageName+".jpg";
                return (
                    <div id="Image" onClick={this.handleClick}>
                       <img id="MainImage" src={"assets/"+this.props.imageName+".jpg"} height="80%" >
                       </img>
                       <h1 id="State">
                        {this.whatToSay[parseInt(this.props.imageName)-1]}</h1>
                    </div>
                )
            }    
        }

        class App extends React.Component{
            state={
                ifStart : "0",
                imageToDisplay: ""
            }
            handleClick=()=>{
                this.setState({ifStart: "1" });
            }
            handleHeart=(imageName)=>{
                this.setState({imageToDisplay: imageName});
                document.getElementById("Image").style.display="grid";
            }
            render(){ 
                return (                    
                    <div id="App">
                        <Navbar handleClickFunc={this.handleClick}/>
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={1} heartID={'1'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={2} heartID={'2'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={4} heartID={'3'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={6} heartID={'4'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={3} heartID={'5'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={1} heartID={'6'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={3} heartID={'7'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={2} heartID={'8'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={3} heartID={'9'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={3} heartID={'10'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={2} heartID={'11'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={2} heartID={'12'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={8} heartID={'13'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={4} heartID={'14'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={4} heartID={'15'}/>:null}
                        {(this.state.ifStart=="1")?<Heart handleClickFunc={this.handleHeart} spRate={1} heartID={'16'}/>:null}            
                        <Image imageName={this.state.imageToDisplay}/>
                    </div>
                )
            }
    }        
        
    ReactDOM.render(<App/>,document.getElementById('app'));
    document.getElementById("myMp3").volume=0.2;
    </script>
    
</body>
</html>